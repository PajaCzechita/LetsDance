{% extends "layout.html" %} {% block body %}
<div class="col-sm-8 offset-1" style="margin-top:20px ;">
<script type="text/javascript" src="https://api.mapy.cz/loader.js"></script>
<script type="text/javascript">Loader.load()</script>
<form method="POST" action="{{ url_for('submit_formular') }}">

    <!--vyhledavani mestske casti praha-->
  <div class="form-group">
        <label for="exampleFormControlSelectCity">Městská část</label>
        <select class="form-control" id="exampleFormControlSelectCity" name='city'>
          <option value="">městská část</option>
          {% for item in city %}
            <option>{{ item.city_part }}</option>
          {% endfor %}  
        </select>
      </div>
      <!--vyhledavani podle veku-->
    <div class="form-group">
      <label for="exampleInputVek">Věk</label>
      <input type="number" class="form-control" id="exampleInputVek" min="1" max="99" name='vek'>
    </div>
    <div class="form-group">
        <label for="exampleFormControlSelectStudio">Studio</label>
        <select class="form-control" id="exampleFormControlSelectStudio" name='studio'>
          <option value="">studio</option>
          {% for item in studio %}
            <option>{{ item.school }}</option>
          {% endfor %}  
        </select>
      </div>
      <!--Vyhledavani podle dnu-->
      <div class="form-check">
        <p>Vyberte dny</p>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Pondělí" id="Den1" name="Den_Pondeli">
        <label class="form-check-label" for="Den1">
          Pondělí
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Úterý" id="Den2" name="Den_Utery">
        <label class="form-check-label" for="Den2">
          Úterý
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Středa" id="Den3" name="Den_Streda">
        <label class="form-check-label" for="Den3">
          Středa
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Čtvrtek" id="Den4" name="Den_Ctvrtek">
        <label class="form-check-label" for="Den4">
          Čtvrtek
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Pátek" id="Den5" name="Den_Patek">
        <label class="form-check-label" for="Den5">
          Pátek
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Sobota" id="Den6" name="Den_Sobota">
        <label class="form-check-label" for="Den6">
          Sobota
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="Neděle" id="Den7" name="Den_Nedele">
        <label class="form-check-label" for="Den7">
          Neděle
        </label>
      </div>
        <!--Vybirani podle lekce-->
      <div class="form-group">
        <label for="exampleFormControlSelectLekce">Lekce</label>
        <select class="form-control" id="exampleFormControlSelectLekce" name='lekce'>
          <option value="">lekce</option>
          {% for item in type %}
            <option>{{ item.lesson }}</option>
          {% endfor %}  
        </select>
      </div>
    <button type="submit" class="btn btn-primary">Hledat</button>
  </form>¨
  {% if results %}

   <!--vlozena mapa - javascript -->
   <div id="mapa" style="width:100%; height:400px;"></div>
   <script type="text/javascript">
     var stred = SMap.Coords.fromWGS84(14.41, 50.08);
     var mapa = new SMap(JAK.gel("mapa"), stred, 12);
     mapa.addDefaultLayer(SMap.DEF_BASE).enable();
     mapa.addDefaultControls();
     var layer = new SMap.Layer.Marker();
     mapa.addLayer(layer);
     layer.enable();
     var options = {};
     //vytvoří marker na souřadnicich v te promene var center a vloží ho do mapy
     {% for item in search %}
     layer.addMarker(new SMap.Marker(SMap.Coords.fromWGS84({{item.longitude}}, {{item.latitude}}), "myMarker", options));	      	      
     {% endfor %}
   </script>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Městská část</th>
        <th scope="col">Věk</th>
        <th scope="col">Studio</th>
        <th scope="col">Den</th>
        <th scope="col">Lekce</th>
        <th scope="col">Čas</th>
      </tr>
    </thead>
    <tbody>
        {% for item in search %}
        <tr>
        <td>{{item.city_part}}</td>
        <td>{{item.ageGroupFrom}} - {{item.ageGroupTo}}</td>
        <td>{{item.school}}</td>
        <td>{{item.day}}</td>
        <td>{{item.lesson}}</td>
        <td>{{item.time}}</td>
      </tr>
        {% endfor %}
     </tbody>
  </table>
  {% endif %}
  </div>

  {% endblock %}